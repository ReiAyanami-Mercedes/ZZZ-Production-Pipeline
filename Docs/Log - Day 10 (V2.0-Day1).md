# Project ZZZ-Pipeline Development Log - Day 10 (V2.0-Day1)
----------------------------------------------------------------
**日期:** 2025-12-09 (V2.0 Day 1)
**状态:** 🟡 **V2.0 架构升级与核心算法攻坚**
**主题:** 视差映射 (Parallax), 架构健壮性 (Robustness)

## 1. V2.0 启动：Git 分支策略
-   [✅] **创建开发分支:** 成功创建并切换至 `v2.0-development` 分支，与 `main` (V1.0) 隔离，确保稳定版不受影响。
-   [✅] **同步主干:** 将 `main` 分支的最新修改 (文档、Release) 合并 (merge) 至 `v2.0-dev`，保证 V2.0 基于最新的 V1.0 开发。

## 2. 核心算法突破：视差之眼 (Module A)
-   **目标:** 解决二次元眼球“贴纸感”，实现具有深度的视觉效果。
-   **技术实现:**
    1.  **引入视差映射 (Parallax Mapping):** 在 Uber Shader 中增加了基于深度图的 UV 偏移算法。
    2.  **切线空间变换 (TBN Matrix):** 在顶点着色器中构建 TBN 矩阵，将世界空间视线转换至切线空间，为视差计算提供了正确的方向向量。
    3.  **悬浮高光 (Floating Highlight):** 创造性地将高光计算与视差 UV 解耦，使用原始 UV (`input.uv`) 绘制高光，产生了“晶状体”的视觉错觉。
    4.  **智能镜像修正 (Mirror Fix):** 通过传递模型空间坐标 (`positionOS`)，在 Shader 中自动判断左右眼，解决了镜像 UV 导致的高光对称问题。
    5.  **MatCap 投影法:** 最终采用 MatCap 投影高光，彻底解决了 UV 错位问题，并增加了“校准”参数。

## 3. 架构健壮性升级：工业化基石 (Module B)
-   **核心思想:** 针对 V1.0 理论裂痕进行修复，引入 **原子性、上下文、可溯源性**。
-   **Maya Python 脚本 (V3.4):**
    -   **原子性 (Atomicity):** 集成 `try...except...finally` 结构，实现导出失败时的 **自动回滚 (Rollback)**，删除半成品文件，防止管线中出现脏数据。
    -   **上下文 (Context):** 在导出 FBX 的同时，生成一个伴生的 `.meta.json` 文件，记录资产的“身世”。
    -   **可溯源性 (Traceability):** 在 `.json` 文件中明确记录 **原始 Maya 场景路径 (`source_maya_file`)**，为下游（Unity）的 Bug 排查提供了“回溯之线”。

## 4. 总结与遗留
-   **V2.0 开局顺利，核心渲染算法已初步实现，架构健壮性得到质的提升。**
-   **遗留问题:** 高光位置的最终微调因模型 UV 复杂性暂时搁置，但不影响整体架构。

## 5. 下一步 (Next Steps)
-   继续攻坚 V2.0 的 **Compute Shader** 模块。
-   完善 Unity 端的 **元数据读取** 逻辑，让 `.meta.json` 文件真正发挥作用。
----------------------------------------------------------------